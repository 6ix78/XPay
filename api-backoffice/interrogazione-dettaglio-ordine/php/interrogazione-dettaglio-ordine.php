

    Gateway XPay
    Pagamento Semplice
        Introduzione
        Avvio pagamento
        Annullo
        Esito
        Notifica
    Pagamento OneClick
        Introduzione
        Su sito del merchant
            Primo pagamento
                Avvio pagamento
                Annullo
                Esito
                Notifica
            Pagamenti successivi
                Chiamata 3D Secure
                    Autenticazione
                    Pagamento
                Tramite redirezione
                    Avvio pagamento
                    Annullo
                    Esito
                    Notifica
        Su pagina di cassa
            Avvio pagamento
            Annullo
            Esito
            Notifica
    Pagamento ricorrente
        Introduzione
        Primo pagamento
            Avvio pagamento
            Annullo
            Esito
            Notifica
        Pagamenti successivi
    Pagamento multivaluta
        Avvio pagamento
        Annullo
        Esito
        Notifica
    Metodi di pagamento
        Introduzione
        PagoinConto
        Google Pay
            Introduzione
            Integrazione tramite API
        Apple Pay
            Introduzione
            Integrazione tramite API
        American Express
        Diners
        JCB
        UnionPay
        Bancomat Pay
        MyBank
        AliPay
        WeChat Pay
        Giropay
        iDEAL
        Bancontact
        EPS
        Przelewy24
        Skrill
        Skrill 1tap
        PayU
        Blik
        PoLi
        Multibanco
        Amazon Pay
            Introduzione
            Integrazione tramite API
            Gestione indirizzo di spedizione
        PayPal
        Klarna
            Introduzione
            Pending
            Loss
            Receive
            Untraceable
            Refunded
        Oney
    XPay Build
        Introduzione
        Form raccolta dati carta
        Pagamento base
        Pagamento ricorrente
            Primo pagamento
            Pagamenti successivi
        Pagamento OneClick
            Primo pagamento
            Pagamenti successivi
        Rinnovo Carta
        Verifica carta
        Gestione 3D-Secure
        APM in modalità Lightbox
    Lightbox
        Introduzione
        Gestione pagamento
        Notifica
        Pagamento ricorrente
            Primo pagamento
            Pagamenti successivi
        Pagamento OneClick
            Primo pagamento
            Pagamenti successivi
    I-Frame
    Server to Server
        Introduzione
        Pagamento 3D-Secure
            Autenticazione
            Pagamento
        Pagamenti M.O.T.O.
        Verifica Carta
        Pagamenti MPI 3DS esterno
        Pagamento multivaluta
            Verifica
            Genera nonce
            Pagamento
        Pagamento ricorrente M.O.T.O.
            Primo Pagamento
            Pagamenti successivi
        Pagamento ricorrente - Pagamento in un click
            Verifica carta 3D-Secure
                Autenticazione
                Verifica carta
            Primo Pagamento 3D-Secure
                Autenticazione
                Pagamento
            Pagamento successivo 3D-Secure
                Autenticazione
                Pagamento
            Pagamento ricorrente
            Rinnovo carta 3D-Secure
            Aggiorna contratto
                Autenticazione
                Aggiornamento
    Configurazione XPay
    Plugin CMS
        Storeden
            Installazione
            Assistenza
        Italiaonline
            Installazione
            Assistenza
        Shopify
            Installazione
            Assistenza
        Wordpress
            XPay
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
            XPay Build
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
        Prestashop
            XPay
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
            XPay Build
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
        Magento
            Magento 2
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
            Magento 2 Build
                Installazione
                Configurazione
                Test e produzione
                Metodi di pagamento
                Flussi di pagamento
                Funzionalità backoffice
        Opencart
            Installazione
            Configurazione
            Test e produzione
            Metodi di pagamento
            Flussi di pagamento
        Farmakom
            Installazione
            Assistenza
        Zencart
            Installazione
            Configurazione
            Test e produzione
            Metodi di pagamento
            Flussi di pagamento
        Salesforce
            Installazione
            Assistenza
        OsCommerce
            Installazione
            Configurazione
            Test e produzione
            Metodi di pagamento
            Flussi di pagamento
        SmallPay
            Installazione
            Assistenza
        Virtuemart
            Installazione
            Configurazione
            Test e produzione
            Metodi di pagamento
            Flussi di pagamento
        Migliorshop
            Installazione
            Assistenza
        ReStore
            Installazione
            Assistenza
        eDock
            Installazione
            Assistenza
        LifePay
            Installazione
            Assistenza
    SDK per app
        iOS
            Pagamento Semplice
            Pagamento in un tap
            Form nativa
            Apple Pay
            Controllo Jailbreak
        Android
            Pagamento Semplice
            Pagamento in un tap
            Form nativa
            Pagamento Chrome Custom Tabs
            Google Pay
            Controllo root
        Servizi iOS e Android
            Backoffice
                Incasso
                Storno/Rimborso
                Elenco Ordini
                Interrogazione ordine
                Richiesta link Paymail
            Controlli Sicurezza
                Inserimento in blacklist
                Rimozione da blacklist
                Controlla se in blacklist
                Report blacklist
                Controllo esistenza CF/PAN
                Rimozione CF/PAN
                Report associazioni CF/PAN
            Gestione Contratti
                Creazione contratto da POS fisico
                Cancellazione contratto
                Abilitazione contratto
                Disabilitazione contratto
                Interrogazione contratti
                Dettaglio contratto
            Hosted Payments
            Pagamenti Sincroni
                Pagamenti MPI 3DS esterno
                Pagamenti Sever to Server SSL
                Pagamenti M.O.T.O.
            Primi pagamenti
                Verifica carta SSL
                Primo Pagamento SSL
                Primo pagamento M.O.T.O.
                Verifica Carta 3D-Secure
                Primo Pagamento 3D-Secure
            Ricorrenze/OneClick
                Pagamento successivo
                Pagamento successivo M.O.T.O.
                Pagamento successivo 3DS
            Varie
                Verifica DCC
                DCC Pagamento
    3D SECURE 2.1
        Introduzione
        API
        Redirezione
    API di backoffice
        Introduzione
        Incasso
        Storno/Rimborso
        Interrogazione dettaglio ordine
        Elenco Ordini
        Richiesta link Pay-by-Link
        Rigenera link Pay-by-Link
        Report
            Elenco
            Download
        Report Pay-by-Link
        Warning
        Gestione Contratti
            Caricamento contratto da transazione POS
            Cancellazione contratto
            Disabilitazione contratto
            Abilitazione contratto
            Interrogazione contratti
            Dettaglio contratto
            Stato contratti
        Gestione Controlli
            Inserimento in blackList
            Cancellazione da blacklist
            Controlla se in blacklist
            Elenco blacklist
            Verifica abbinamento CF/PAN
            Eliminazione CF/PAN
            Elenco associazioni CF/PAN
    Incasso senza pensieri
        Introduzione
        Incasso Differito e Dilazionato
            Introduzione
            Incasso Differito
            Incasso Dilazionato
        Pagamento
            Prenotazione Garantita
            Prepagato Rimborsabile
            Prepagato non Rimborsabile
            Preautorizzazione
        API
            Inserimento struttura
            Inserimento termini e condizioni
            Modifica termini e condizioni
            Delayed Charge
            Incremental
            Pagamento No Show
            Report Dilazione
            Caricamento dati prenotazione
                Prenotazione Garantita
                Prepagato Rimborsabile
                Prepagato non Rimborsabile
                Preautorizzazione
    Tokenizzazione di circuito
        Introduzione
        Notifiche
        Dettaglio tokenizzazione
    Fatturazione elettronica
        Introduzione
        Crea nonce fattura
        Esito fattura
        Annulla fattura
        Report fatture
    Tabelle e Codifiche
        Codici errore API Restful
        Codifica languageId
        Codici Divisa per DCC
        Codifica tipo Transazione
        Codifica esiti
        Codifica tipo carta
        Codifica descrizione esito
        Codifica ECI, XID e CAVV
        Codici IVA
        Codici stato fatture
        Versioni SDK iOS
        Parametri MIT framework
    Supporto
    & Risorse scaricabili

Interrogazione dettaglio ordine

Restituisce il dettaglio di un ordine con tutte le operazioni ad esso associate.
URI
ecomm/api/bo/situazioneOrdine
METODO
POST
ACCEPT
application/json
Messaggio di avvio
Obbligatorio 	Nome 	Descrizione 	Formato
	apiKey 	Alias assegnato da Nexi al merchant 	AN MAX 30
	codiceTransazione 	Identificativo transazione assegnato dal merchant 	AN MIN 2 MAX 30
	timeStamp 	Timestamp in formato millisecondi 	N 13 CRT
	mac 	Message Code Authentication Campo di firma della transazione. Per il calcolo si veda il paragrafo "Calcolo MAC" in calce a questa sezione. 	AN 40 CRT
Calcolo MAC

Per il messaggio di avvio, la stringa da firmare dovrà contenere i seguenti campi:

    apiKey
    codiceTransazione
    timeStamp
    chiaveSegreta

UN ESEMPIO DI TALE STRINGA POTREBBE ESSERE
MAC = HASH SHA1(apiKey=<val>codiceTransazione=<val>timeStamp=<val><chiaveSegreta>)
Messaggio di esito positivo
Obbligatorio 	Nome 	Descrizione 	Formato
	
	esito 	Esito dell'operazione 	AN MAX 2
	
	idOperazione 	Identificativo transazione assegnato da Nexi 	AN MIN 2 MAX 30
	
	timeStamp 	Timestamp in formato millisecondi 	N 13 CRT
	
	scadenza 	Scadenza carta di credito 	DATA aaaamm
	
	mac 	Message Code Authentication Campo di firma della transazione. Per il calcolo si veda il paragrafo "Calcolo MAC" in calce a questa sezione. 	AN 40 CRT
	
	report 	Array di oggetti contenenti informazioni relative alle transazioni 	Array
Messaggio di esito negativo
Obbligatorio 	Nome 	Descrizione 	Formato
	
	esito 	Esito dell'operazione 	AN MAX 2
	
	idOperazione 	Identificativo transazione assegnato da Nexi 	AN MIN 2 MAX 30
	
	timeStamp 	Timestamp in formato millisecondi 	N 13 CRT
	
	errore 	Oggetto contenente i dettagli dell'errore 	Oggetto
	
	mac 	Message Code Authentication Campo di firma della transazione. Per il calcolo si veda il paragrafo "Calcolo MAC" in calce a questa sezione. 	AN 40 CRT
Calcolo MAC

Per il messaggio di esito, la stringa da firmare dovrà contenere i seguenti campi:

    esito
    idOperazione
    timeStamp
    chiaveSegreta

UN ESEMPIO DI TALE STRINGA POTREBBE ESSERE
MAC = HASH SHA1(esito=<val>idOperazione=<val>timeStamp=<val><chiaveSegreta>)

NOTE:
Ritorna un oggetto che descrive la transazione (dettaglio dell’ordine, del pagamento e delle eventuali altre operazioni – contabilizzazioni / storni).

Il campo idContabParzialePayPal è restituito solo nel caso in cui la transazione ha brand PayPal. Nel caso in cui il tipo operazione è “CONTAB.” rappresenta l’id PayPal da passare all’api storno per stornare la contabilizzazione parziale. Mentre in caso di tipo operazione “STORNO” indica a quale contabilizzazione parziale ci si riferisce.
Il campo idContabParzialePayPal = “”, possibile solo per tipo operazione “STORNO”, indica che lo storno si riferisce a un pagamento di tipo Sale che non ha contabilizzazione parziale. In questo caso per stornare è possibile inviare solo il codice transazione.

Possibili valori per stato:
- Autorizzato: il pagamento è stato autorizzato, non ancora contabilizzato. La contabilizzazione avviene di norma automaticamente da parte di NEXI, alle ore 24 dello stesso giorno
- Negato: il pagamento non è stato autorizzato. Non verrà quindi contabilizzato.
- Annullato: il pagamento è stato autorizzato ma poi annullato, o per errore di notifica, o su esplicita azione dell’esercente (tramite back office, o tramite API)
- Contabilizzato: il pagamento è stato contabilizzato.
- Rimborsato: il pagamento, in precedenza contabilizzato, è stato completamente rimborsato all’utente.
- Non Creato: il pagamento non è arrivato all’autorizzazione, si è verificato un problema sulle fasi precedenti (es.: interruzione del 3dSecure da parte dell’utente)
- Contabilizzato Parz.: sul pagamento è stato effettuato un incasso parziale dell’importo autorizzato.
- Rimborsato Parz.: sul pagamento è stato effettuato un rimborso parziale dell’importo contabilizzato.
CHIAMACI
800 194 021
SCRIVICI
tech.ecommerce@nexi.it
logo
SEZIONI PRINCIPALI

    XPay Easy
    XPay Pro
    Faq

AZIENDA

    Chi Siamo
    Contatti

INFORMATIVE

    Trasparenza
    Privacy
    Cookies

© Nexi Payments SpA 2017. All Rights Reserved. Membro del Gruppo IVA Nexi P.IVA 10542790968

    facebook linkedin twitter 

    PHP
    JAVA
    PYTHON
    .NET

                                            

<?php

​

//Interrogazione dettaglio ordine

​

$connection = curl_init();

​

if ($connection) {

​

    $requestURL = "https://int-ecommerce.nexi.it/"; // URL

    $requestURI = "ecomm/api/bo/situazioneOrdine"; // URI

    

    // Parametri per calcolo MAC

    $apiKey = "<ALIAS>"; // Alias fornito da Nexi

    $chiaveSegreta = "<CHIAVE SEGRETA PER CALCOLO MAC>"; // Chiave segreta fornita da Nexi

    $codiceTransazione = "4bnrgtj34b"; // Codice della transazione di cui si cercano i dettagli

    $timeStamp = (time()) * 1000;

​

    // Calcolo MAC

    $mac = sha1('apiKey=' . $apiKey . 'codiceTransazione=' . $codiceTransazione . 'timeStamp=' . $timeStamp . $chiaveSegreta);

​

    // Parametri

    $parametri = array(

        'apiKey' => $apiKey,

